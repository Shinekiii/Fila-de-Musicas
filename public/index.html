<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Player de Música</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js" defer></script>
</head>
<body class="dark">
    <div class="theme-toggle" onclick="toggleTheme()">
        <img src="https://img.icons8.com/ios/50/000000/sun--v1.png" alt="Tema Claro" class="icon light-icon">
        <img src="https://img.icons8.com/ios/50/ffffff/moon-symbol.png" alt="Tema Escuro" class="icon dark-icon">
    </div>
    <div class="container">
        <div class="sidebar">
            <h1>Player de Música</h1>
            <input type="text" id="videoNameInput" placeholder="Nome do vídeo">
            <button onclick="searchAndAddVideo()">Adicionar à Fila</button>
            <button onclick="skipCurrent()">Pular Música</button>
            <ul id="playlist"></ul>
            <button onclick="window.location.href='/logout'">Logout</button>
            <div id="user-info">
                <p>Bem-vindo, <span id="user-name"></span>!</p>
                <img id="user-photo" alt="Foto do perfil">
            </div>
        </div>
        <div id="player"></div>
    </div>
    <script>
        function toggleTheme() {
            document.body.classList.toggle('dark');
            document.body.classList.toggle('light');
            const lightIcon = document.querySelector('.light-icon');
            const darkIcon = document.querySelector('.dark-icon');
            if (document.body.classList.contains('dark')) {
                lightIcon.style.display = 'none';
                darkIcon.style.display = 'block';
            } else {
                lightIcon.style.display = 'block';
                darkIcon.style.display = 'none';
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            fetch('/api/user')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('user-name').textContent = data.name;
                    document.getElementById('user-photo').src = data.photo;
                });
        });
    </script>
</body>
</html>
